define({_onNewPassChange:function(n,t){var e=n.val(),i=n.parent(),r=n.next("span.glyphicon"),u,f;vIsPwd(e)?(i.removeClass("has-error"),u=t.view.find("input.new-password-retype").val(),i.hasClass("has-success")||(i.addClass("has-success"),r.removeClass("glyphicon-remove"),r.hasClass("glyphicon-ok")||r.addClass("glyphicon-ok")),u.length!=0&&u!=""?(t.view.find("input.new-password-retype").trigger("change"),t.isError=!0):(t.view.find("input.new-password-retype").trigger("focus"),t.isError=!1)):(i.removeClass("has-success"),i.hasClass("has-error")||(i.addClass("has-error"),r.removeClass("glyphicon-ok"),r.hasClass("glyphicon-remove")||r.addClass("glyphicon-remove"),t.isError=!0,t.view.find("input.new-password").trigger("focus"),f=t.view.find("button.submit-change-password"),f.attr("disabled")!="disabled"&&f.attr("disabled","disabled")))},_onOldPassChange:function(n,t){var i=n.val();vRqs({_a:t.queryAction,_c:{Id:app.uid,Password:i},_f:t.queryFields},function(n,i,r){var u=t.view.find("input.old-password").parent(),f=t.view.find("input.old-password").next("span.glyphicon"),o,e;n&&r==1?(o=i[0][1],u.removeClass("has-error"),u.hasClass("has-success")||(u.addClass("has-success"),f.removeClass("glyphicon-remove"),f.hasClass("glyphicon-ok")||f.addClass("glyphicon-ok"),t.view.find("input.new-password").trigger("focus"),t.isError=!1)):(u.removeClass("has-success"),u.hasClass("has-error")||(u.addClass("has-error"),f.removeClass("glyphicon-ok"),f.hasClass("glyphicon-remove")||f.addClass("glyphicon-remove"),t.isError=!0,t.view.find("input.old-password").trigger("focus"),e=t.view.find("button.submit-change-password"),e.attr("disabled")!="disabled"&&e.attr("disabled","disabled")))})},_onRetypePassChange:function(n,t){var f=n.val(),e=t.view.find("input.new-password").val(),i=n.parent(),r=n.next("span.glyphicon"),u;f==e?(i.removeClass("has-error"),i.hasClass("has-success")||(i.addClass("has-success"),r.removeClass("glyphicon-remove"),r.hasClass("glyphicon-ok")||r.addClass("glyphicon-ok"),t.isError=!1,t.view.find("button.submit-change-password").removeAttr("disabled"))):(i.removeClass("has-success"),i.hasClass("has-error")||(i.addClass("has-error"),r.removeClass("glyphicon-ok"),r.hasClass("glyphicon-remove")||r.addClass("glyphicon-remove"),t.isError=!0,u=t.view.find("button.submit-change-password"),u.attr("disabled")!="disabled"&&u.attr("disabled","disabled")),n.trigger("focus"))},_onClickSubmit:function(n){n.isError?alert("Có lỗi xảy ra, vui lòng thử lại."):vRqs({_a:n.updateAction,_c:{Id:app.uid},_d:{Password:n.view.find("input.new-password").val()}},function(t){t?(alert("Đổi mật khẩu thành công."),n.view.find("button.cancel-change-password").trigger("click")):alert("Đổi mật khẩu thất bại.")})},_init:function(n){n.isError=!1},_show:function(n){n.view.html($.html(n.xtype));$.vCheckPopupRights(n.view);n.view.find(".modal.fade").modal("show")},_bind:function(n){var t=this;n.view.find("input.old-password").change(function(){t._onOldPassChange($(this),n)});n.view.find("input.new-password").change(function(){t._onNewPassChange($(this),n)});n.view.find("input.new-password-retype").change(function(){t._onRetypePassChange($(this),n)});n.view.find("button.submit-change-password").click(function(){t._onClickSubmit(n)})},start:function(n){var t=this;vv.initView(n);t._init(n);t._show(n);t._bind(n)}});
//# sourceMappingURL=p.min.js.map
