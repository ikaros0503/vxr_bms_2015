define({title:"Quản lý chuyến",name:"Chuyến",grid:!0,gTitle:"Danh sách chuyến",gId:"tripTableContainer",gNoLoad:!0,gridSortBy:{Name:"Time",IsDesc:!1},xRowCls:"mt5",xWidth:"",cols:3,pageSize:25,keyFields:["Time"],finalKeyFields:["Alias"],queryAction:"fGetTrip",updateAction:"UpTrip",insertAction:"AddTime",queryConditions:{CompId:app.cid,Time:"($x is not null)",Type:"$x='2' order by Time desc"},defaultData:{CompId:app.cid,Type:2,BaseId:"$base"},checkHasTicket:{_a:"fGetTicket",_c:{Status:"(($x) IN(1,2,4,5,8))",TripDate:{params:"$Date,$Time",get:"getTripDate"},TripId:"$base"},_f:"SeatCode"},checkDelConditions:{_a:"fGetTicket",_c:{Status:"(($x) IN(1,2,4,5,8))",TripDate:{params:"$Date,$Time",get:"getTripDate"},TripId:"$base"},_f:"Id",existMsg:"Chuyến đang có {$x} vé, vui lòng hủy / chuyển vé"},baseCf:{_a:"fGetTrip",_c:{CompId:app.cid,IsPrgStatus:1,Type:1},_f:"Id, Name, StatusInfo, Info"},items:[{x:"Id"},{name:"Name",base:!0,baseValField:"Id",baseDisplayField:"Name",xSearchDefault:!0,xSearchAlways:!0,data:!0,copyFromBase:!0,gIdx:1,vType:"num",valField:"BaseId",gQuery:!0,fIdx:1,ref:"select.route",grid:typeof _dict._hasShowTripNameInRCF!="undefined"&&!_dict._hasShowTripNameInRCF?!1:!0,xSearch:!0,xtype:"cbbTpl01",label:"Tuyến",form:!0,cbb:!0,domain:!0,cls:"route",rights:"S271",formToGridOnly:!0,defaultTrip:!0,alwaysEnable:!0,options:[],allowEmpty:!0,nullLabel:"Chọn chuyến",listeners:[{xChange:"onBaseIdChange"}]},{name:"Date",type:"Date",xSearch:!0,xSearchDefault:!0,domain:!0,xSearchAlways:!0,data:!0,grid:!1,gQuery:!0,gIdx:2,fIdx:4,ref:".departure",gWidth:"5%",gCls:"grid-cell-center",alwaysEnable:!0,xtype:"datepickerTpl01",label:"Ngày",form:!0,cls:"departure",rights:"S301",value:vGetNow(),gType:"date",displayFormat:"dd-mm-yy",formToGridOnly:!0,gDis:"gDisDate",cpc:"cpcDate",listeners:[{xDateSelect:"onDateChange"}]},{name:"Time",gTextToFId:!0,useOptionTextAsVal:!0,fromBase:!0,fromExcludeCases:"SBF",cbb:!0,xbase:!0,baseValSrcField:"Info",data:!0,alwaysEnable:!0,noTriggerChange:!0,gCls:"grid-cell-center",autoAppend:!0,appendText:"Ext",vType:"num",xSearch:!0,xSearchDefault:!0,grid:!0,gQuery:!0,gIdx:3,gWidth:"5%",fIdx:7,ref:"select.pickup-time",xtype:"cbbTpl01",label:"Giờ",cls:"pickup-time",form:!0,rights:"",btnRights:"",btnLabel:"-",btnCls:"btn-danger change-status",listeners:[{xChange:"onRunTimeChange"}],svb:"svbTime",svc:"svcTime",xchr:"xchrTime",xchv:"xchvTime"},{name:"Alias",defaultValue:0,gQuery:!0,gCls:"grid-cell-center",grid:!1,gIdx:4,gWidth:"50px",data:!0,valField:"Alias",xSearch:!0,cbb:!0,vType:"num",xtype:"cbbTpl03",label:"Bus",form:!1,fIdx:100,ref:"select.bus",cls:"bus",rights:"",changeOnSelectionChange:!0,listeners:[{xChange:"onAliasChange"}],cpc:"cpcAlias"},{name:"SeatTemplateInfo",xSearch:!0,cbb:!0,grid:!0,gQuery:!0,gIdx:9,fIdx:3,ref:".seat-template",data:!0,xtype:"cbbTpl07",label:"Sơ đồ ghế",form:!0,cls:"seat-template",rights:"",options:[],gDis:"gDisStpl",rvc:"rvcStpl",svb:"svbStpl",svc:"svcStpl",allowEmpty:!1,listConfig:{ajax:{_a:"fGetResource",_c:{CompId:app.cid,IsPrgStatus:1,Type:1},_f:"Id, Name, Info"},valField:"Id",displayField:"Name"}},{name:"FareInfo",cbb:!1,grid:!1,gQuery:!0,gIdx:3,fIdx:13,ref:".fare",copyFromBase:!0,data:!0,xtype:"inputHidden01",label:"",form:!0,cls:"fare",rights:"",options:[]},{name:"RouteInfo",cbb:!1,grid:!1,gQuery:!0,gIdx:3,fIdx:13,ref:".route-info",copyFromBase:!0,data:!0,xtype:"inputHidden01",label:"",form:!0,cls:"route-info",rights:"",options:[]},{name:"TotalBookedSeats",cbb:!1,grid:!1,gQuery:!0,gIdx:3,fIdx:13,ref:".total-booked-seats",data:!0,xtype:"inputHidden01",label:"",form:!0,cls:"total-booked-seats",rights:"",options:[]},{name:"TotalPaidSeats",cbb:!1,grid:!1,gQuery:!0,gIdx:3,fIdx:13,ref:".total-paid-seats",data:!0,xtype:"inputHidden01",label:"",form:!0,cls:"total-paid-seats",rights:"",options:[]},{name:"ClosedStatus",cbb:!1,grid:!1,gQuery:!0,gIdx:10,fIdx:9,ref:".closedStatus",copyFromBase:!1,data:!0,xtype:"lblXuatben",label:"Xuất bến",form:!0,cls:"closedStatus",rights:"",changeOnSelectionChange:!0,listeners:[{xChange:"onClosedStatusChange"}],gDis:"gDisClosedStatus",svc:"svcXB",noSave:!0},{name:"BranchReceiveProduct",cbb:!1,grid:!1,gQuery:!0,gIdx:3,fIdx:13,ref:".branch-receive-product",copyFromBase:!0,data:!0,xtype:"inputHidden01",label:"",form:!0,cls:"branch-receive-product",rights:"",options:[]},{name:"StatusInfo",xtype:"inputHidden01",data:!0,form:!0,cls:"statusinfo",grid:!1,gQuery:!0,gWidth:"100px",label:"Trạng thái",auto:!0,fIdx:10,ref:".statusinfo",xSearch:!0,depends:["Time","BaseId"],needBase:!0,alwaysDisable:!0,options:vGTrs(),gDis:"gDisStatusInfo",cpc:"cpcSI",svc:"svcSI"},{x:"Vehicle",svc:"svcVhc",rvc:"rvcVhc",label:"Xe",rights:$.rights.mTrip_upPsIf.dtr,svb:"svbVhc",name:"Vehicle",noAjax:!1,cls:"chosen-container",form:!0,fIdx:2,grid:!0,gIdx:5,gDis:"gDisVehicle"},{x:"Persons",svc:"svcMem",rvc:"rvcMem",label:"Tài",rights:$.rights.mTrip_upPsIf.dtr,svb:"svbMem",name:"Driver",type:oPst.driver,noAjax:!0,disabled:"disabled",form:!0,fIdx:5,grid:!0,gIdx:6,gDis:"gDisDriver"},{x:"Persons",svc:"svcMem",rvc:"rvcMem",label:"Phục vụ",rights:$.rights.mTrip_upPsIf.dtr,svb:"svbMem",name:"Assistant",type:oPst.assistant,noAjax:!0,form:!0,fIdx:8,grid:!0,gIdx:7,gDis:"gDisAid"},{x:"Persons",svc:"svcMem",rvc:"rvcMem",label:"HD viên",rights:$.rights.mTrip_upPsIf.dtr,svb:"svbMem",name:"Guide",type:oPst.guide,noAjax:!0,form:!1,fIdx:9,grid:!1,gIdx:8,gDis:"gDisGuide"},{name:"VehicleInfo",grid:!0,gQuery:!0,gHide:!0,gIdx:9,data:!0,label:"VehicleInfo",depends:["Vehicle"],auto:!0,svc:"svcVhcI"},{name:"Note",grid:!0,gQuery:!0,gIdx:13,gWidth:"*",fIdx:6,ref:"textarea.trip-note",xSearch:!0,data:!0,xtype:"areaTpl01",label:"Ghi chú",form:!0,cls:"trip-note",alwaysEnable:!0,rights:"",svb:"svbNote"},{name:"Action",grid:!0,gQuery:!1,gIdx:14,gWidth:"*",fIdx:6,ref:"",label:"Thao tác",form:!1,cls:"",alwaysEnable:!0,rights:"",gDis:"gDisAction"},{name:"SeatStatus",grid:!0,gQuery:!1,gIdx:8,gWidth:"*",fIdx:6,ref:"",label:"Tình trạng ghế",glbl:"Đ/chỗ--T/toán--Trống",form:!1,cls:"",alwaysEnable:!0,rights:"",gDis:"gDisSeatStatus"},{name:"TripStatus",grid:!0,gQuery:!1,gIdx:10,gWidth:"*",fIdx:6,ref:"",label:"Tình trạng",form:!1,cls:"",alwaysEnable:!0,rights:"",gDis:"gDisTripStatus"},{name:"BaseId",grid:!0,gQuery:!0,gIdx:7,gHide:!0,isBaseId:!0,data:!0,label:"BaseId",form:!1,cls:"baseid",vType:"num"},{name:"TeamInfo",grid:!0,gQuery:!0,gIdx:5,gHide:!0,label:"TeamInfo",data:!0,form:!1,auto:!0,depends:["Driver","Guide","Assistant"],gDis:"gDisTeam",svc:"svcTI"},{name:"Info",grid:!0,gQuery:!0,gHide:!0,copyFromBase:!0,gIdx:100,data:!0},{name:"CompId",grid:!0,gQuery:!0,gHide:!0,gIdx:100,data:!0},{name:"Type",grid:!0,gQuery:!0,gHide:!0,gIdx:100,data:!0},{name:"FromArea",grid:!0,gQuery:!0,copyFromBase:!0,gHide:!0,gIdx:100,data:!0},{name:"ToArea",grid:!0,gQuery:!0,copyFromBase:!0,gHide:!0,gIdx:100,data:!0}],buttons:[{xtype:"btnTpl01",label:"Lưu",cls:"btnSaveChange",rights:$.rights.mTrip_saveTrip.dtr,ref:"button.btnSaveChange",colspan:1,name:"btnSaveChange",form:!0,listeners:[{xClick:"onSave"}]},{xtype:"btnTplDel",label:"Hủy",cls:"delete btn-danger",rights:$.rights.mTrip_rmvTrip.dtr,form:!0,colspan:1,name:"btnCancel",isCancell:!0,ref:"button.delete",listeners:[{xClick:"onClickBtnCancel"}]},{xtype:"txtAddTimeTpl01",label:"Thêm chuyến",name:"AddTime",noSave:!0,form:!0,fIdx:44,data:!0,ref:".add-time",cls:"add-time",rights:$.rights.mTrip_addTrip.dtr,btnRights:$.rights.mTrip_addTrip.dtr,btnLabel:"",btnCls:"btn-success addTime",alwaysEnable:!0,colspan:10,listeners:[{ref:"button.addTime",xClick:"onClickAddTime",inputRef:"input.add-time"}]},]});
//# sourceMappingURL=o.min.js.map
