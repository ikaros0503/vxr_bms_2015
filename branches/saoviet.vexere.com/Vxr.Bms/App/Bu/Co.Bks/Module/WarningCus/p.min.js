define({start:function(){var n=this;vbv("doGetWarningCustomer",function(t){t.d&&n._getCustomerWarning(t.d.f,t.d.cName,t.d.cPhone,t.d.cId,t.d.lmDate,t.d.tId,t.d.tName)});vbv("doClearWarningCustomer",function(t){t.d&&n._clearCustomerWarning(t.d.f)})},_getCustomerWarning:function(n,t,i,r,u,f,e){var o=this,s=o._createCustomerWarningObj(r,u,f),h=function(r,u,f){r==1&&(o._clearCustomerWarning(n),f>0&&o._renderCustomerWarning(n,t,i,u,e))};vRqs(s,h)},_createCustomerWarningObj:function(n,t,i){var r={};return r._a="fGetTicket",r._c={TripId:i,CustomerId:n,TripDate:"($x >= '"+t.toFormatString("iso")+"')",Status:"(($x) IN("+_dict._tksUpSearch.join()+")) ORDER BY TripDate ASC"},r._f="TripDate, SeatCode, Fare, Status",r},_clearCustomerWarning:function(n){n&&n.find(".customer-w").remove()},_renderCustomerWarning:function(n,t,i,r,u){var e=$("<ul />"),f=[],o=[];$.each(r,function(n,t){var r=vPrsDt(t[0]),e=t[1].split("|")[0],s=parseInt(t[2]),h=parseInt(t[3]),i=o.indexOf(r.toFormatString("iso"));i==-1&&(i=o.push(r.toFormatString("iso"))-1);typeof f[i]=="undefined"&&(f[i]={_b:{_numS:0,_sCodes:[],_total:0,_tname:u,_date:r},_c:{_numS:0,_sCodes:[],_total:0,_tname:u,_date:r},_p:{_numS:0,_sCodes:[],_total:0,_tname:u,_date:r}});switch(h){case 1:f[i]._b._numS++;f[i]._b._sCodes.push(e);f[i]._b._total+=s;break;case 2:f[i]._p._numS++;f[i]._p._sCodes.push(e);f[i]._p._total+=s;break;case 5:case 8:case 3:case 4:f[i]._c._numS++;f[i]._c._sCodes.push(e);f[i]._c._total+=s}});$.each(f,function(n,t){var i,r,u;typeof t!="undefined"&&t!=null&&(t._b._numS>0&&(i={t:{_sText:"Đang đặt",_numS:t._b._numS,_sCodes:t._b._sCodes.join(", "),_total:t._b._total.toMn()+"₫",_tname:t._b._tname,_date:t._b._date.toFormatString("dd-mm-yyyy"),_time:t._b._date.toFormatString("hh:mm")}},e.append(vtpl(_dict._btwarningTpl,i))),t._c._numS>0&&(r={t:{_sText:"Hủy",_numS:t._c._numS,_sCodes:t._c._sCodes.join(", "),_total:t._c._total.toMn()+"₫",_tname:t._c._tname,_date:t._c._date.toFormatString("dd-mm-yyyy"),_time:t._c._date.toFormatString("hh:mm")}},e.append(vtpl(_dict._btwarningTpl,r))),t._p._numS>0&&(u={t:{_sText:"Đã thanh toán",_numS:t._p._numS,_sCodes:t._p._sCodes.join(", "),_total:t._p._total.toMn()+"₫",_tname:t._p._tname,_date:t._p._date.toFormatString("dd-mm-yyyy"),_time:t._p._date.toFormatString("hh:mm")}},e.append(vtpl(_dict._btwarningTpl,u))))});e.find("li").length>0&&n.find("#UpdateForm").prepend($(vtpl(_dict._wTpl,{m:{_cname:t,_cphone:i,_content:$("<div />").append(e).html()}})).addClass("customer-w"))}});$(document).ready(function(){});
//# sourceMappingURL=p.min.js.map
