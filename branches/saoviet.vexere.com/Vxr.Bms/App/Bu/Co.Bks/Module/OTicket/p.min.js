define({info:[],comps:{},pager:null,start:function(){$("#bksContent").hide();$("#report").hide();$("#product-content").hide();$("#bTickets").hide();$("#cod").hide();$("div.footer").hide();$("#oTicket").show();$("#oTicket").html($("#oTicketTemplate").html());this.init()},init:function(){var n=this,t;$(".view-mode").show();$(".edit-mode").hide();n.loadComp();t=function(){$("button.btn-edit").click(function(){$(".view-mode").hide();$(".edit-mode").show()});$("button.btn-done").click(function(){$(".view-mode").show();$(".edit-mode").hide()})};$.getScript("App/Core/UI/pager.js",function(){n.pager=new Pager(1,10,"#oTicket div.page",5,function(){n.renderInfo()});n.pager.render();n.updateFilter().loadInfo()})},loadTrip:function(n){var t=this;t.comps[n]!=null||($("#oTicket select[name=comp]").html(""),vRqs({_a:"fGetTrip",_c:{Type:"($x=1 or $x=2) and IsPrgStatus=1 and CompId="+n},_f:"Id, Type, Name, FromArea, ToArea, Date,Time, RouteInfo, FareInfo, SeatTemplateInfo, StatusInfo, Info, BaseId  "},function(n,t){if(n==1&&t.length>0)for(var i=0;i<t.length;i++);}))},loadComp:function(){var n=this;$("#oTicket select[name=comp]").html("");vRqs({_a:"fGetCompany",_c:{Type:"$x=1 and (HasOnlineContract=1 or HasOfflineContract=1)"},_f:"Id, Name "},function(t,i){var r,u;if(t==1&&i.length>0)for(r=0;r<i.length;r++)u={id:i[r][0],name:i[r][1]},n.comps[u.id]=u,$("#oTicket select[name=comp]").append('<option value="'+u.id+'">'+u.name+"<\/option>")})},setStatus:function(){},renderInfo:function(){var n=this,u=function(){$("#oTicket button.btn-edit").click(function(){var n=$(this).attr("data-id");$("#oTicketRow"+n+" .view-mode").hide();$("#oTicketRow"+n+" .edit-mode").show()});$("#oTicket button.btn-done").click(function(){var n=$(this).attr("data-id");$("#oTicketRow"+n+" .view-mode").show();$("#oTicketRow"+n+" .edit-mode").hide()});$("#oTicket button.btn-cancel").click(function(){var n=$(this).attr("data-id");$("#oTicketRow"+n+" .view-mode").show();$("#oTicketRow"+n+" .edit-mode").hide()})},i,r,t;if(!(n.info.length<=0)){for($("#oTicket table.data tbody").html(""),i=(n.pager.currentPage-1)*n.pager.itemsPerPage,r=Math.min(n.pager.currentPage*n.pager.itemsPerPage,n.pager.totalRecords)-1,t=i;t<=r;t++)$("#oTicket table.data tbody").append(vtpl($("#oTicketRowTemplate").html(),n.info[t]));u()}},updateFilter:function(){return this},loadInfo:function(){var n=this,t;n.setStatus("loading");n.info=[];t=function(n,t){var i={};return i.index=t,i.id=n[0],i.amount=n[1],i.customerName=n[2],i.customerPhone=n[3],i.customerMail=n[4],i.note=n[5],i.tripName=n[6],i.tripDate=n[7],i.tripTime=n[8],i.fromArea=n[9],i.toArea=n[10],i.createdDate=n[11],i.compName=n[12],i.status=n[13],i};vRqs({_a:"fGetBus_Ticket_Form",_c:{},_f:"Id, Amount, CName, CPhone, CEmail, CNote, TripName, TripDate, TripTime, FromArea, ToArea, IsPrgCDate, IsPrgCompanyInfo, Status"},function(i,r){if(i==1&&r.length>0){for(var u=0;u<r.length;u++)n.info.push(t(r[u],u));n.pager.updateInfo(n.info.length,1).render();n.setStatus("loaded")}else n.setStatus("error")})}});
//# sourceMappingURL=p.min.js.map
