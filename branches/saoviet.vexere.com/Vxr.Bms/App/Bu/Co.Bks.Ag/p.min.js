define({loadAgentUI:function(){$("body").layout({applyDemoStyles:!0,north__showOverflowOnHover:!0,north__spacing_open:0,south__spacing_open:0,west__initClosed:!0,east__initClosed:!0}).hide("east");$("#agtComps").append('<ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a href="#nhaxe" aria-controls="home" role="tab" data-toggle="tab">Nhà xe<\/a><\/li><li role="presentation"><a href="#theotuyen" aria-controls="home" role="tab" data-toggle="tab">Theo tuyến<\/a><\/li><\/ul>');$("#agtComps").append('<div class="tab-content"><div role="tabpanel" class="tab-pane active" id="nhaxe"><input type="text" name="name" id="compKeyword" class="form-control input-sm" placeholder="Tìm nhà xe"><\/div><div role="tabpanel" class="tab-pane" id="theotuyen"><input type="text" name="name" id="routeKeyword" class="form-control input-sm" placeholder="Tìm tuyến"><\/div><\/div>');$.applyRoute();$.applyComp();$(".ui-layout-north").addClass("hidden-border")},start:function(){var n=this;n.loadAgentUI(app.serviceUrl)}});$(document).ready(function(){$.agtCfg={isApply:!0,isApplyComp:!0,isApplyRoute:!0,isTripChange:!1,tripRef:"#agtTrips",tripTrigger:"tripChanged",tripAjax:{_a:"fGetTripWithContract",_c:{IsPrgStatus:1,Type:10},_f:"Id, Name, CompId, CompIdName"},tripFields:{Id:{key:!0,create:!1,edit:!1,list:!1},Name:{title:"Danh sách tuyến",sorting:!0,display:function(n){return n.record.HasOnlineContract?'<span style="color: red;" >'+n.record.Name+"<\/span>":'<span style="color: blue;" >'+n.record.Name+"<\/span>"}}},compRef:"#agtComps",compTrigger:"compChanged",compAjax:{_a:"fGetCompany",_c:{IsPrgStatus:1,Type:1,HasOnlineContract:" ($x=1 OR  HasOfflineContract=1) order by HasOnlineContract desc, Name asc"},_f:"Id, Name, HasOnlineContract, HasOfflineContract"},compFields:{Id:{key:!0,create:!1,edit:!1,list:!1},Name:{title:"Danh sách nhà xe",display:function(n){return n.record.HasOnlineContract?'<span style="color: red;" >'+n.record.Name+"<\/span>":'<span style="color: blue;" >'+n.record.Name+"<\/span>"}}}};$.agentSearchComp=function(n){$("body").layout().open("west");n?$.agtCfg.compAjax._c.Name="(($x like N'%"+n+"%') or (Keywords like N'%"+n+"%') or (IsPrgUnsignKeywords like N'%"+n+"%'))":delete $.agtCfg.compAjax._c.Name;$.loadPanel($.agtCfg.compRef,$.agtCfg.compAjax,$.agtCfg.compFields,$.agtCfg.compTrigger,!0)};$.applyComp=function(){$.agtCfg.isApplyComp&&($(".compListFilterPanel").removeClass("hidden"),$.loadPanel($.agtCfg.compRef,$.agtCfg.compAjax,$.agtCfg.compFields,$.agtCfg.compTrigger),$("#compKeywordIcon").click(function(){var n=$.trim($("#compKeyword").val());$.agentSearchComp(n)}),$("#compKeyword").keyup(function(n){n.preventDefault();var t=$.trim($("#compKeyword").val());$.agentSearchComp(t)}))};$.agentSearchRoute=function(n){n?$.agtCfg.tripAjax._c.Name="(($x like N'%"+n+"%') or (Keywords like N'%"+n+"%') or (IsPrgUnsignKeywords like N'%"+n+"%'))":delete $.agtCfg.tripAjax._c.Name;$.loadPanel($.agtCfg.tripRef,$.agtCfg.tripAjax,$.agtCfg.tripFields,$.agtCfg.tripTrigger,!0)};$.applyRoute=function(){$.agtCfg.isApplyRoute&&($(".compListFilterPanel").removeClass("hidden"),$.loadPanel($.agtCfg.tripRef,$.agtCfg.tripAjax,$.agtCfg.tripFields,$.agtCfg.tripTrigger),$("#routeKeywordIcon").click(function(){var n=$.trim($("#routeKeyword").val());$.agentSearchRoute(n)}),$("#routeKeyword").keypress(function(n){n.which==13&&n.preventDefault();var t=$.trim($("#routeKeyword").val());$.trim(n.key)!=""&&n.key.length==1?t=t+n.key:n.keyCode==8&&(t=t.substring(0,t.length-1));(n.which==32||n.which==13||t.length>=2)&&$.agentSearchRoute(t)}))};$.loadPanel=function(n,t,i,r,u){var h,f,e,o,s;u||(h={title:"",paging:!1,sorting:!0,defaultSorting:"Name ASC",selecting:!0,selectingCheckboxes:!1,actions:{listAction:app.serviceUrl},selectionChanged:function(){var t=$(n).jtable("selectedRows");t.length>0&&t.each(function(){var n=$(this).data("record");$("body").trigger(r,n)})},fields:i},$(n).jtable(h));f=[];e=[];$.each(t._f.split(","),function(n,t){e.push($.trim(t))});o=[];s={};$.each(e,function(n,t){s[t]=""});o.push(s);$(n).jtable("removeAllRows");$(n).jtable("addLocalRecords",function(n,t){return{Result:1,Records:o,TotalRecordCount:o.length,page:(t.jtStartIndex+t.jtPageSize)/t.jtPageSize}});vRql(t,{a:function(){},m:function(n,t){var i={};$.each(e,function(n,r){i[r]=t[n]});f.push(i)},z:function(){if($(n).jtable("addLocalRecords",function(n,t){return{Result:1,Records:f,TotalRecordCount:f.length,page:(t.jtStartIndex+t.jtPageSize)/t.jtPageSize}}),$(n).removeClass("hidden"),n==$.agtCfg.compRef){var t=$($.agtCfg.compRef).find("tr.jtable-data-row");t.length>0&&$(n).jtable("selectRows",$(t[0]))}if(n==$.agtCfg.tripRef){$(n).find(".jtable").on("mouseover",function(){$.agtCfg.isTripChange=!0});$(n).find(".jtable").on("mouseleave",function(){$.agtCfg.isTripChange=!1})}}},this)};$("body").on("compChanged",function(n,t){if(typeof t!="undefined"&&t!=null){if($.previousCompId=app.cid,_dict=$.extend({},_bkDict),$("body").removeClass("theme"+app.cid),app.cid=t.Id,$("body").addClass("theme"+app.cid),$("body").trigger("rlBKS"),!$.agtCfg.isTripChange&&$.agtCfg.isApplyComp&&$.currentRouteId){var i=$($.agtCfg.tripRef).jtable("getRowByKey",$.currentRouteId);$($.agtCfg.tripRef).jtable("deselectRows",i)}$("body").find("#type-report").trigger("change");$("body").find("a.navbar-brand").html(t.Name)}});$("body").on("tripChanged",function(n,t){var r=$($.agtCfg.tripRef).jtable("selectedRows"),i;$.currentRouteId=t.Id;app.cid=t.CompId;$.agtCfg.isApplyComp&&(i=$($.agtCfg.compRef).jtable("getRowByKey",app.cid),$($.agtCfg.compRef).jtable("selectRows",$(i)))});$("body").on("tripChangedWithoutReload",function(n,t){var r=$($.agtCfg.tripRef).jtable("selectedRows"),i;$.currentRouteId=t.TripId;app.cid=t.CompId;$.agtCfg.isApplyComp&&(i=$($.agtCfg.compRef).jtable("getRowByKey",app.cid),$($.agtCfg.compRef).jtable("selectRows",$(i)))});$("body").on("tripNotFound",function(){var n=$($.agtCfg.compRef).jtable("getRowByKey",$.previousCompId);n&&$($.agtCfg.compRef).jtable("selectRows",n)});$("body").on("applyBooking",function(){});$("body").on("changeCTripTime",function(){})});
//# sourceMappingURL=p.min.js.map
