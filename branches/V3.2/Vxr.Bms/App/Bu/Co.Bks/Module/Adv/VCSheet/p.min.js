define({start:function(n){try{var t=this;t.o=n;t._$container=$(n.x);t._createVC();vbv("doShowVC",function(n){t._rlVc(n.d.td)});vbv("doChangeVCTrip",function(n){t.o._cVCTripId=n.d.value})}catch(i){console.log("(E) VSheet",i)}},_createVC:function(){this._$vcsheet=$("<div />").addClass("vcancelled-sheet  col-md-12 col-sm-12 col-xs-12").appendTo(this._$container);this._$vcnav=$("<div />").addClass("vcanclled-nav  col-md-12 col-sm-12 col-xs-12").append($("<div />").addClass("col-md-12")).appendTo(this._$container).children().first()},_rlVc:function(n){var t=this,i=t.o,r=t._createGetVCSeatObj(),u=function(r,u,f,e){if(r!=1||f<=0){t._clearVCSheet();t._notFoundCancelledTicket();return}t._clearVCSheet();f>0&&(t._mapVCTicket(u,n),i._totalVCItem=parseInt(e));t._renderVCSheet(n);t._renderVCPagination(n)};vRqs(r,u)},_createGetVCSeatObj:function(){var n={},i=this,t=i.o;return n._a="pGetTicket",n._c={TripId:t._cVCTripId,Status:"($x) = 3"},n._ft="TripId = "+t._cVCTripId+" and (Status) = 3",n._f=_dict._tgF.join(),n._se="Id desc",n._si=t._cVCPageIndex,n._mr=_dict._nOP,n},_clearVCSheet:function(){this._$vcsheet.empty();this._$vcnav.empty()},_mapVCTicket:function(n,t){var i=this;i._vc=[];$.each(n,function(n,r){r.shift();var u=i._crTkFrRc(r,t);$.isEmptyObject(u)||i._vc.push(u)})},_renderVCSheet:function(n){var t=this,f,i,e,u,r,o;if(t._vc.length>0)for(f=Math.round(t._vc.length/n._numCoach),i=0;i<t._vc.length;i+=f)for(e=$("<ul />").addClass("coach vbooking-coach").appendTo(t._$vcsheet),e.addClass(_dict._g[n._numCoach-1]).addClass(_dict._sg[n._numCoach-1]).addClass(_dict._mg[n._numCoach-1]),u=t._vc.slice(i,i+f),r=0;r<u.length;r++)typeof u[r]!="undefined"&&(o=u[r]._renderVCTicket().addClass(_dict._g[_dict._tplNumCol-1]),e.append(o));else t._notFoundCancelledTicket()},_renderVCPagination:function(n){var r=this,e=r.o,t=r._getVCPag(e._cVCPageIndex,_dict._nOP,e._totalVCItem),i,u,f;if(t.CountAllPages>1){if(i=$("<ul />").addClass("pagination pagination-sm pull-right"),t.FrevPage!=""?i.append($("<li />").append($("<a />").html("&laquo;").attr("href","javascript:;").attr("data-index",t.FrevPage))):i.append($("<li />").addClass("disabled").append($("<a />").html("&laquo;").attr("href","javascript:;").attr("data-index",""))),t.FrevPages.length>0)for(u=0;u<t.FrevPages.length;u++)i.append($("<li />").append($("<a />").html(t.FrevPages[u]).attr("href","javascript:;").attr("data-index",t.FrevPages[u])));if(i.append($("<li />").addClass("active").append($("<a />").html(t.CurrentPage).attr("href","javascript:;").attr("data-index",t.CurrentPage))),t.NextPages.length>0)for(f=0;f<t.NextPages.length;f++)i.append($("<li />").append($("<a />").html(t.NextPages[f]).attr("href","javascript:;").attr("data-index",t.NextPages[f])));t.NextPage!=""?i.append($("<li />").append($("<a />").html("&raquo;").attr("href","javascript:;").attr("data-index",t.NextPage))):i.append($("<li />").addClass("disabled").append($("<a />").html("&raquo;").attr("href","javascript:;").attr("data-index","")));i.appendTo(r._$vcnav);i.find("a").not(".disabled").on("click",function(t){t.preventDefault();t.stopPropagation();r._changeVCPageIndex($(this).attr("data-index"));r._rlVc(n)})}},_getVCPag:function(n,t,i){for(var u,e,f=Math.ceil(i/t),r=[],o=n-5;o<n;o++)o>=1&&r.push(o);for(u=[],e=n+1;e<n+5;e++)e<=f&&u.push(e);return{CurrentPage:n,CountAllPages:f,First:-1==r.indexOf(1)&&1!=n?1:"",FrevPage:r.length>0?r[r.length-1]:"",FrevPages:r,NextPages:u,NextPage:u.length>0?u[0]:"",Last:-1==u.indexOf(f)&&f!=n?f:"",NumPerPage:t}},_notFoundCancelledTicket:function(){var n=this;$("<div />").addClass("alert alert-danger").html("<strong>Không tồn tại vé đã hủy.<\/strong>").appendTo(n._$vcsheet)},_changeVCPageIndex:function(n){this.o._cVCPageIndex=parseInt(n)},_crTkFrRc:function(n,t){var y=parseInt(n[8]),p=parseInt(n[22]),r,u,f;if(p==t._cTripBus){var w=parseInt(n[0]),b=vPrsDt(n[5]),k=vPrsDt(n[6]),e=parseInt(n[9]);isNaN(e)&&(e=0);var d=n[10],g=n[11],nt=n[12],o=n[13];null==o&&(o="");var tt=n[14],it=n[15],rt=n[16],ut=vPrsDt(n[17]),ft=vPrsDt(n[18]),et=vPrsDt(n[19]),ot=n[20],s=parseInt(n[21]);isNaN(s)&&(s=0);r=parseInt(n[26]);isNaN(r)&&(r=0);u=parseInt(n[27]);isNaN(u)&&(u=0);f=parseInt(n[29]);isNaN(f)&&(f=0);var st=n[23],ht=n[24],ct=parseInt(n[25]),lt=parseInt(n[1]),at=vPrsDt(n[3]),c=0,l="",a="",i=n[7];i!=null&&(i=i.split("|"),c=parseInt(i[2]),l=i[3],a=i[4]);var vt=n[28],yt=n[29],h=parseInt(n[30]);isNaN(h)&&(h=1);var pt=n[32],wt=n[33],bt=n[34],kt=n[35],dt=n[36],gt=n[37],ni=n[38],v=new T(w,at,c,l,a,y,b,k,e,d,g,nt,o,tt,it,rt,ut,ft,et,ot,s,st,ht,ct,lt,r,u,vt,yt,h,f,pt,wt,bt,kt,dt,gt,ni);return v.agentId=n[2],v}return{}}});
//# sourceMappingURL=p.min.js.map
