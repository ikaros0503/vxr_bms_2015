define({start:function(){var n=this;vbv("doGetSuggestCustomer",function(t){t.d&&n._getSuggestCustomer(t.d.f,t.d.key,t.d.lmDate,t.d.tId,t.d.tName)});vbv("doClearSuggestCustomer",function(t){t.d&&n._clearSuggestCustomer(t.d.f)})},_getSuggestCustomer:function(n,t,i,r,u){var f=this,e=$("<ul />").addClass("search-items"),o,s;e.append($("<li>Đang tìm kiếm khách hàng, vui lòng đợi trong giây lát.........<\/li>"));n.find("input:text[name=PhoneNumbers]").parent().append($("<div />").addClass("dropdown-menu upform-search-result-phone").append($("<div />").addClass("search-title").append("Kết quả tìm kiếm")).append(e).append($("<div />").addClass("search-summary").append('Tổng số <span class="vblack"><b>0<\/b><\/span> kết quả')));app.isGettingSuggest?app.suggestKey=t:(o=f._createSuggestCustomerObj(t),s=function(t,e,o,s){(app.isGettingSuggest=!1,t==1)&&(f._clearSuggestCustomer(n),o>0?(f._mapSuggestCustomer(e,s),app.totalSuggestCustomer>0?(f._renderSuggestCustomer(n),f._bindEventOnSuggestCustomer(n,i,r,u)):f._clearSuggestCustomer(n)):app.preventUpdate=!1)},app.isGettingSuggest=!0,vRqs(o,s))},_createSuggestCustomerObj:function(n){var t={},r=this,i;app.suggestKey=n;t._a="fGetCustomer1";i="($x like N'%"+n+"%') ORDER BY Phone ASC";switch(n.length){case 6:i="($x like N'%"+n+"%') ORDER BY Phone ASC"}return t._c={CompId:parseInt(app.cid),Phone:i},t._f="Id, Name, Note, Phone, BookingTicket, PaidTicket, CancelTicket",t},_clearSuggestCustomer:function(n){app.suggestCustomer=[];app.totalSuggestCustomer=0;n&&n.find("div.upform-search-result-phone").remove()},_mapSuggestCustomer:function(n){app.suggestCustomer=[];$.each(n,function(n,t){t[3]&&t[3].indexOf(app.suggestKey)>=0&&app.suggestCustomer.push(t)});app.totalSuggestCustomer=app.suggestCustomer.length},_renderSuggestCustomer:function(n){var t=$("<ul />").addClass("search-items");app.totalSuggestCustomer>0&&($.each(app.suggestCustomer,function(n,i){var r;if(typeof i[0]!="undefined"&&i[0]!=null){var f=parseInt(i[4]),e=parseInt(i[5]),o=parseInt(i[6]),u=i[2];u=vIsEstStr(u)?"&nbsp;-&nbsp;"+u:"";r=i[1];r=vIsEstStr(r)?r+"&nbsp;-&nbsp;":"";t.append($("<li />").attr("cid",i[0]).attr("cphone",i[3]).attr("cname",i[1]).html("<p>"+r+"<span class='vred'><b>"+i[3]+"<\/b><\/span>"+u+"<\/p><p>Đã đặt <span class='vred'><b>"+f+"<\/b><\/span> ghế / Số lần đi <span class='vred'><b>"+e+"<\/b><\/span> / Số lần hủy <span class='vred'><b>"+o+"<\/b><\/span><\/p>"))}}),n.find("input:text[name=PhoneNumbers]").parent().append($("<div />").addClass("dropdown-menu upform-search-result-phone").append($("<div />").addClass("search-title").append("Kết quả tìm kiếm")).append(t).append($("<div />").addClass("search-summary").append('Tổng số <span class="vblack"><b>'+app.totalSuggestCustomer+"<\/b><\/span> kết quả"))),n.find("div.upform-search-result-phone ul.search-items li:first-child").addClass("selected"))},_bindEventOnSuggestCustomer:function(n,t,i,r){var f=this,u;app.totalSuggestCustomer>0&&(u=n.find("div.upform-search-result-phone li"),u.unbind("click").on("click",function(u){u.preventDefault();u.stopPropagation();n.find("input[name=CustomerId]").val($(this).attr("cid"));n.find("input:text[name=PhoneNumbers]").val($(this).attr("cphone"));n.find("input[name=FullName]").val($(this).attr("cname"));_dict._hasBTWarning&&(vbf("onGetWarningCustomer",{f:n,cName:$(this).attr("cname"),cPhone:$(this).attr("cphone"),cId:$(this).attr("cid"),lmDate:t,tId:i,tName:r}),n.find("#UpdateForm div.alert.alert-danger.message-error").html("").hide());f._clearSuggestCustomer(n)}).hover(function(){u.removeClass("selected");$(this).addClass("selected")}),f._bindArrowEventList(u))},_bindArrowEventList:function(n){var t,i=n.parent(),r=i.height(),u=i.prop("scrollHeight"),f=1,e=Math.round(u/r)-1;$(window).keydown(function(o){var s,c,h,l;o.which===40?(t?(n.removeClass("selected"),s=t.next(),t=s.length>0?s.addClass("selected"):n.eq(0).addClass("selected")):t=n.eq(0).addClass("selected"),t.position().top<0?(i.animate({scrollTop:0},500),f=1):t.position().top>r&&(c=Math.floor(r*f)-35,i.animate({scrollTop:c},500),f++)):o.which===38&&(t?(n.removeClass("selected"),h=t.prev(),t=h.length>0?h.addClass("selected"):n.last().addClass("selected")):t=n.last().addClass("selected"),t.position().top<=0?(l=Math.floor(u-r*e)+35,i.animate({scrollTop:l},500),e++):t.position().top>r&&(i.animate({scrollTop:u},500),e=Math.round(u/r)-1))})}});$(document).ready(function(){});
//# sourceMappingURL=p.min.js.map
