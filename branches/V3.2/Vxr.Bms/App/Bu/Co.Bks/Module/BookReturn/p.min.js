define({start:function(){var n=this;vbv("doBookReturnTicket",function(t){n._getReturnInfo(t.d.f,t.d.tId)});vbv("bindEventBookReturnTicket",function(t){n._bindEventBookReturnTicket(t.d.tId)});vbv("doUnbindEventBookReturnTicket",function(){n._unbindEventBookReturnTicket()});vbv("doUpdateInfoOfReturnTickets",function(){n._updateInfoOfReturnTickets()})},_getReturnInfo:function(n,t){var r=this,i;app.copyInfo={};app.cBookReturnTripId=t;i=$._convertFormDataToObj(n);typeof _dict._returnField!="undefined"&&$.each(_dict._returnField,function(n,t){app.copyInfo[t]=i[t]!=null?i[t]:""});vbf("resetSeatStack");vbf("onClearSelectedItem");vbf("onCloseUpdateForm");$._toggleFilterWhenBookReturn();r._bindEventBookReturnTicket(t)},_validateBookReturn:function(n){var i=!1,t=null;return typeof _dict._returnFieldRequired!="undefined"&&$.each(_dict._returnFieldRequired,function(i,r){switch(r){case"PhoneNumbers":t=n.find("input:text[name=PhoneNumbers]")}}),t!=null&&(t.val()==""?(t.closest("div.col-md-6").addClass("has-error"),i=!0,n.find("div.message-error").html("Vui lòng nhập số điện thoại."),n.find("div.message-error").show()):(t.closest("div.col-md-6").removeClass("has-error"),n.find("div.message-error").html(""),n.find("div.message-error").hide())),!i},_bindEventBookReturnTicket:function(n){var t=$("#FilterForm").find("select[name=TripId]"),i=$("#FilterForm").find("input[name=DepartureDate]"),r=$("#FilterForm").find("select[name=TimeSlot]");$("#bksContent div.vbooking-sheet").find("ul.vbooking-coach li.seat div.available, ul.vbooking-coach li.seat div.booking").not("ul.vbooking-coach li.seat div.fbooking").unbind().on("mouseenter",function(){$(this).addClass("cursor-khu-hoi")});$("#bksContent div.vbooking-sheet").find("ul.vbooking-coach li.seat div.paid button, ul.vbooking-coach li.seat div.fbooking button").prop("disabled",!0);n==app.cBookReturnTripId?($("#bksContent div.vbooking-sheet").find("ul.vbooking-coach li.seat").unbind("click"),$("#bksContent div.vbooking-sheet").find("ul.vbooking-coach li.seat button").prop("disabled",!0),i.prop("disabled",!0),$("#FilterForm").find(".glyphicon-calendar").parent().unbind("click"),r.prop("disabled",!0),app.hasBookReturnTicket&&(t.hasClass("book-return")||t.addClass("book-return"))):($("#bksContent div.vbooking-sheet").find("ul.vbooking-coach li.seat div.paid, ul.vbooking-coach li.seat div.fbooking").closest("li.seat").unbind("click"),$("#bksContent div.vbooking-sheet").find("ul.vbooking-coach li.seat div.available button").prop("disabled",!1),t.removeClass("book-return"),i.prop("disabled",!1),r.prop("disabled",!1),$._bindEventOnCalendarIcon())},_unbindEventBookReturnTicket:function(){$("#bksContent div.vbooking-sheet").find("ul.vbooking-coach li.seat div.available").removeClass("cursor-khu-hoi");$("#bksContent div.vbooking-sheet").find("ul.vbooking-coach li.seat div.available").unbind("mouseenter");$("#bksContent div.vbooking-sheet").find("ul.vbooking-coach li.seat div.available button").prop("disabled",!1)},_updateInfoOfReturnTickets:function(){var t,i,n;if(app.seatToBeUpdatedReturningInfo.length>0&&app.seatToBeUpdatedReturningInfo[0]._tickets.length>0){for(t=[],i=[],n=0;n<app.seatToBeUpdatedReturningInfo.length;n++)t.push({Id:app.seatToBeUpdatedReturningInfo[n]._tickets[0]._id,Code:app.seatToBeUpdatedReturningInfo[n]._tickets[0]._code,Bus:0}),i.push({ReturnCode:app.dataToBeSavedReturningInfo.code,ReturnDate:app.dataToBeSavedReturningInfo.date,Code:app.seatToBeUpdatedReturningInfo[n]._tickets[0]._code});vRqs({_a:"UpdateBookTicket",_c:t,_d:i},function(){})}app.seatToBeUpdatedReturningInfo=[]}});$(document).ready(function(){$._resetBookReturnInfo=function(){app.copyInfo={};app.hasBookReturnTicket=!1;app.cBookReturnTripId=null;$._toggleFilterWhenBookReturn()};$._toggleFilterWhenBookReturn=function(){var n=$("#FilterForm").find("select[name=TripId]"),t=$("#FilterForm").find("select[name=TimeSlot]");app.hasBookReturnTicket?(n.addClass("book-return"),$("#FilterForm").find(".glyphicon-calendar").parent().unbind("click"),t.prop("disabled",!0),$("body").trigger("fDisableDate")):(n.removeClass("book-return"),t.prop("disabled",!1),$._bindEventOnCalendarIcon(),$("body").trigger("fEnableDate"))}});
//# sourceMappingURL=p.min.js.map
