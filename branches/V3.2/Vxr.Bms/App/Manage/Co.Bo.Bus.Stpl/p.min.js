define({_getSeatTemplateTable:function(n,t,i,r,u){var f="",e,h,o,s;for(f+='<div class="col-md-12 table-responsive mt10">',e=1;e<=n;e++){for(e==1?(f+='<div class="col-md-6 text-center pl0">',f+=$.html("winTitleTpl01",{title:"TẦNG DƯỚI"})):(f+='<div class="col-md-6 text-center pr0">',f+=$.html("winTitleTpl01",{title:"TẦNG TRÊN"})),f+='<table id="table-seat" name="seat-map" class="table phoikhach table-bordered"><tbody>',o=1;o<=t;o++){for(f+="<tr>",s=1;s<=i;s++)h="",u&&(h=u[(e-1)*t*i+(o-1)*i+(s-1)],typeof h=="undefined"&&(h="")),f+='<td><input type="text"  class="form-control input-sdg input-sm" floor='+e+' row="'+o+'" col="'+s+'" id="seat-0-'+o+"-"+s+'" value="'+h+'"><\/td>';f+="<\/tr>"}f+="<\/tbody><\/table>";f+="<\/div>"}return f+"<\/div>"},onBeginSelectionChange:function(n,t){vv.enableItem(n,"button.saveSeatTpl",t!=null);vv.enableItem(n,"button.delete",t!=null);vv.enableItem(n,"input.info",!1)},onItemLoaded:function(n){var t=this;if($("#seat-map")&&n)t.onLoadSeatMap(n.Info)},onActionComplete:function(){var t=this,i=t.view,n=$("#seat-map");n&&(n.empty(),vv.enableItem(i,"button.saveSeatTpl",!1))},onCreateSeatMap:function(){var n=this,t=n.view,r=!0,u="",i=[];if($.each(gDx(n.o),function(t,f){var e=n.view.find(f.ref).val();!f.noSave&&f.required&&(e==""||e.trim().length<=0)&&(r=!1,u+="\n Vui lòng nhập "+f.label.toLocaleLowerCase(),i.push(f))}),r){var e=$("input.num-floor").val(),o=$("input.num-row").val(),s=$("input.num-col").val(),h=$("select.seat-type").val(),f="";f+=n._getSeatTemplateTable(e,o,s,h);$("#seat-map").html(f);vv.enableItem(t,"button.saveSeatTpl",!0)}else vv.showMessage({element:t.find(".alert.message"),type:"alert-danger",content:u}),i.length>0&&t.find(i[0].ref).trigger("focus")},onLoadSeatMap:function(n){var y=this,r,s;if(n==null||(r=n.split("~"),r==null||r.length==0))return"";var u=r[0],t=u.split("|"),e=parseInt(t[1]),p=parseInt(t[3]);u=r[1];t=u.split("|");var o=parseInt(t[1]),f=parseInt(t[2]),h=new Array(e*o*f),c,l,a,v;for(i=e+1+2;i<r.length;i++)u=r[i],t=u.split("|"),v=t[4],c=parseInt(t[5]),l=parseInt(t[6]),a=parseInt(t[7]),h[(c-1)*o*f+(l-1)*f+(a-1)]=v;return s="",s+=y._getSeatTemplateTable(e,o,f,p,h),$("#seat-map").html(s),""},onSaveSeat:function(){var t=this,p=t.view,h=1,st=$("input.num-floor").val(),w=$("input.num-row").val(),l=$("input.num-col").val(),b=0,ht=$("select.seat-type option:selected").text(),a=$("select.seat-type").val(),k=p.find('table[name="seat-map"]'),n="",e="",o=0,d=0,g=0,nt=1,v,y="",ut,ft,u,i,et,ot;n="~1|1|4|4|Tài xế|1|1|1|1|1|3||~1|2|8|3|Cửa trong|1|1|5|1|1|3||"+n;var s,o,tt,it,rt;for(f=1;f<=k.length;f++){for(ut=k[f-1],ft=$("input",ut),s=0,r=0;r<w;r++)for(c=0;c<l;c++)u=ft[r*l+c],i=u.value,i!=null&&i.length>0&&(i.charAt(0)=="L"||i.charAt(0)=="S"?(v=6,g++):(v=a,d++),s++,o=i,e=i,tt=u.getAttribute("floor"),it=u.getAttribute("row"),rt=u.getAttribute("col"),n+="~",n+=h+"|"+nt+"|"+v+"|"+o+"|"+e+"|"+tt+"|"+it+"|"+rt+"|1|1|1||",nt++);b+=s;e="Tầng "+f;o="F"+f;y+="~";y+=h+"|"+w+"|"+l+"|"+s+"|"+f+"|"+a+"|"+o+"|"+e+"||"}n=y+n;et=$("input.seat-map-name").val();ot=h+"|"+st+"|"+b+"|"+a+"|A1111|"+et+"||";n=ot+n;$(p).find("input.seat-info").val(n);$("input.summary-info").val(d);$("input.extended-summary-info").val(g);t.model&&t.model.CompId&&t.model.CompId==1&&(t.model.CompId=parseInt(app.cid),t.model.Id=null);t.onBasicSave()},gDisCompId:function(n){switch(parseInt(n.record.CompId)){case 1:return"Sơ đồ mẫu";default:return"Của nhà xe"}},gDisNumFloor:function(n){return vGvo(n.record.Info,0,1)},gDisNumRow:function(n){return vGvo(n.record.Info,1,1)},gDisNumCol:function(n){return vGvo(n.record.Info,1,2)},gDisSeatType:function(n){var i=parseInt(vGvo(n.record.Info,0,3)),t;switch(i){case 1:t="Ghế ngồi";break;case 2:t="Giường nằm";break;case 3:t="Ghế ngồi bán nằm";break;case 4:t="Tài xế";break;case 5:t="Ghế dự phòng";break;case 6:t="Ghế/giường luồng";break;default:t="Không rõ"}return t},rvcNumFloor:function(n,t){var i=this.model.Info;return i?vGvo(i,0,1):t},rvcNumRow:function(n,t){var i=this.model.Info;return i?vGvo(i,1,1):t},rvcNumCol:function(n,t){var i=this.model.Info;return i?vGvo(i,1,2):t},rvcSeatType:function(n,t){var u=this.model.Info,r,i;if(u){r=parseInt(vGvo(u,0,3));switch(r){case 1:i="Ghế ngồi";break;case 2:i="Giường nằm";break;case 3:i="Ghế ngồi bán nằm";break;case 4:i="Tài xế";break;case 5:i="Ghế dự phòng";break;case 6:i="Ghế/giường luồng";break;default:i="Không rõ"}return r}return t},gDisPhoiId:function(n){var i=this.cf.options,t=n.record.PhoiId;return $("select.phoiId option[value="+t+"]").text()}});
//# sourceMappingURL=p.min.js.map
