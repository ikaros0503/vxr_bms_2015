(function(n){var t={_create:n.custom.vbooking.prototype._create};n.extend(!0,n.custom.vbooking.prototype,{options:{},_$filterForm:null,_$BSfilterForm:null,_$voFilterForm:null,_$vvFilterForm:null,_$vcFilterForm:null,_$searchTicketFilter:null,_searchResult:[],_totalSearchResult:0,_$filterSearchResult:null,_hasSearchPhone:!1,_create:function(){var i,r,u;(t._create.apply(this,arguments),this.options.serviceUrl)&&(this._createFilterForm(),this._createBSFilterForm(),this._createVOFilterForm(),this._createVVFilterForm(),this._createVCFilterForm(),this._createXuatBenButton(),i=n.vPrpRgts(n("ul.vbooking-list")),n.vApplyRights(app.rights,i),r=n.vPrpRgts(n("div.vbooking-toolbar.filter")),n.vApplyRights(app.rights,r),u=this,vbv("updateFilters",function(n,t){u.updateFilters(t)}))},updateFilters:function(t){var i=this,u,r;i._cTripTime=t.tripTime;n("body").trigger("tripChangedWithoutReload",{CompId:t.compId,TripId:t.tripId,TripTime:t.tripTime});n("#FilterForm select[name=TripId]").val(t.tripId);u=t.tripDate.split("-")[2]+"-"+t.tripDate.split("-")[1]+"-"+t.tripDate.split("-")[0];vfe("body","fSetDate",{value:new Date(u)});vfe("body","fSetTime",{value:t.tripTime});i._changeCTripId(n("#FilterForm select[name=TripId]").val());i._changeCTripIndex(n("#FilterForm select[name=TripId]").prop("selectedIndex"));i._changeCFromId(0);i._changeCToId(0);i._reloadStopPoints();i._changeCTripTime(app.cTime);i._changeCTripDate(app.cDate);i._reloadTimeSlot();i._reloadTimeFromAndTo();i._reloadFrame();i._reloadSheet();i._generateStageCode();i._changeCMaxStageCode(i._cStageCode);i._reloadAllowedSeats();i._reloadSheet();app.fMoving||(vbf("resetSeatStack"),vbf("onClearSelectedItem"));_dict._availableSeatOn&&vbf("fMapAvaiSeat",{value:i});typeof _dict._hasDefaultStagePerTrip!="undefined"&&_dict._hasDefaultStagePerTrip&&(typeof _dict._defaultStagePerTrip[n("#FilterForm select[name=TripId]").val()]!="undefined"?(r=_dict._defaultStagePerTrip[n("#FilterForm select[name=TripId]").val()].split(","),i._cDefaultFromId=parseInt(r[0]),i._cDefaultToId=parseInt(r[1])):(i._cDefaultFromId=i._cFromId,i._cDefaultToId=i._cToId))},_initEvent:function(){var n=this;n.eventInited||(n.eventInited=!0)},_createFilterForm:function(){var t=this;t._$filterForm=n("#FilterForm");t._bindEventOnFilterForm()},_createBSFilterForm:function(){var t=this;t._$BSfilterForm=n(".BSFilterForm");t._bindEventOnBSFilterForm()},_createVOFilterForm:function(){var t=this;t._$voFilterForm=n("#VOFilterForm");t._bindEventOnVOFilterForm()},_createVVFilterForm:function(){var t=this;t._$vvFilterForm=n("#VVFilterForm");t._bindEventOnVVFilterForm()},_createVCFilterForm:function(){var t=this;t._$vcFilterForm=n("#VCFilterForm");t._bindEventOnVCFilterForm()},_changeCTripId:function(n){this._cTripId=parseInt(n)},_getCTripId:function(){return this._cTripId},_changeCTripIndex:function(n){this._cTripIndex=parseInt(n)},_getCTripIndex:function(){return this._cTripIndex},_changeCFromId:function(n){this._cFromId=parseInt(n)},_changeCToId:function(n){this._cToId=parseInt(n)},_changeCStageCode:function(n){this._cStageCode=n},_changeCMaxStageCode:function(n){this._cMaxStageCode=n},_changeCTripDate:function(n){this._cTripDate=n},_changeCTripTime:function(t){this._cTripTime=t;n("body").trigger("changeCTripTime",t)},_changeCTripBus:function(n){this._cTripBus=parseInt(n)},_reloadFilter:function(t){var i=this,r,u,f;i._hasBookReturnTicket||FlatObj.LDefTrip&&(t&&t.t&&!isNaN(t.t)?i._cTripId=parseInt(t.t):vIsEstStr(app.rights)&&(r=app.rights.match(/\~3\|1\|\d+/g),r!=null?(u=parseInt(r[r.length-1].substring(r[r.length-1].lastIndexOf("|")+1)),isNaN(u)||(i._cTripId=u)):i._cTripId=0),vIsEstStr(app.rights)&&app.rights.indexOf(n.rights.bBookPastTk.val)>=0&&(i._rBookingOnPast=!0));i._reloadTrip();i._reloadStopPoints();typeof _dict._hasDefaultStagePerTrip!="undefined"&&_dict._hasDefaultStagePerTrip&&(typeof _dict._defaultStagePerTrip[i._cTripId]!="undefined"?(f=_dict._defaultStagePerTrip[i._cTripId].split(","),i._cDefaultFromId=parseInt(f[0]),i._cDefaultToId=parseInt(f[1])):(i._cDefaultFromId=i._cFromId,i._cDefaultToId=i._cToId));i._generateStageCode();i._changeCMaxStageCode(i._cStageCode);i._cTripTime=t&&t.h&&moment(t.h,"HH.mm").isValid?moment(t.h,"HH.mm").format("HH:mm"):null;i._reloadTimeSlot();i._reloadTimeFromAndTo();_dict._availableSeatOn&&vbf("fMapAvaiSeat",{value:i});i._reloadVOTrip();i._reloadVVTrip();i._reloadVCTrip()},_reloadTrip:function(){var t=this,i=t._$filterForm.find("select[name=TripId]").empty(),r=!1;n.each(t._data,function(n,i){t._cTripId==i.Id&&(r=!0)});n.each(t._data,function(u,f){if(typeof _dict._hasBlockTripByBranch=="undefined"||!_dict._hasBlockTripByBranch||typeof _dict._blockTripByBranch=="undefined"||typeof _dict._blockTripByBranch[app.aid]=="undefined"||_dict._blockTripByBranch[app.aid].indexOf(f.Id)==-1){var e=n("<option />",{text:f.Name,value:f.Id});r&&t._cTripId>0?f.Id==t._cTripId&&(e.attr("selected",!0),t._changeCTripIndex(u)):u==0&&(e.attr("selected",!0),t._changeCTripIndex(u),t._changeCTripId(f.Id));i.append(e)}});i.find("option:selected").length<=0&&(i.find("option").first().attr("selected",!0),t._changeCTripTime(i.val()),t._changeCTripIndex(0));vfe("body","fSetDate",{value:t._cTripDate})},_getStopPoints:function(){var n=this;return n._data[n._cTripIndex].StopPoints},_reloadStopPoints:function(){var t=this,s=t._$filterForm.find("select[name=FromPoint]").empty(),h=t._$filterForm.find("select[name=ToPoint]").empty(),o,u,r;if(app.oRights.StageEnable&&n("#StageModule").removeClass("hidden"),t._data[t._cTripIndex]){var i=t._data[t._cTripIndex].StopPoints,f=0,e=i.data.length-1;t._cFromId==0&&i.data[0]!=null&&(t._cFromId=parseInt(i.data[0].Id));t._cToId==0?i.data[e]!=null&&(t._cToId=parseInt(i.data[e].Id)):t._cFromId==t._cToId&&(o=i.idx[t._cFromId],t._cToId=parseInt(i.data[o+1].Id));u=i.idx[t._cFromId];r=i.idx[t._cToId];r<=u&&(r=u+1,t._cToId=i.data[r].Id);app.oRights.StageEnable&&n.each(i.data,function(i,e){var o,c;f<r&&(o=n("<option />",{text:"_",value:e.Id}),e.Id==t._cFromId&&o.attr("selected",!0),s.append(o));f>u&&(c=n("<option />",{text:"_",value:e.Id}),e.Id==t._cToId&&c.attr("selected",!0),h.append(c));f++})}},_reloadTimeFromAndTo:function(){var t=this,h=t._$filterForm.find("select[name=FromPoint]"),c=t._$filterForm.find("select[name=ToPoint]");if(app.oRights.StageEnable&&n("#StageModule").removeClass("hidden"),t._data[t._cTripIndex]){var u=t._data[t._cTripIndex].StopPoints,f=0,l=u.data.length-1,e=u.idx[t._cFromId],o=u.idx[t._cToId];o<=e&&(o=e+1,t._cToId=u.data[o].Id);var s=app.cTime.split(":"),r=parseInt(s[0]),i=parseInt(s[1]);n.each(u.data,function(n,t){var u,o;r+=t.Hour;i+=t.Minute;i>=60&&(i-=60,r+=1);r=r%24;f<l&&(u=h.find('option[value="'+t.Id+'"]'),u.html(t.Code+" - "+t.Name+" - "+r+":"+(i<10?"0":"")+i));f>e&&(o=c.find('option[value="'+t.Id+'"]'),o.html(t.Code+" - "+t.Name+" - "+r+":"+(i<10?"0":"")+i));f++})}},_reloadTimeSlot:function(){var n=this;vfe("body","fReloadTimeSlot",{value:n})},_reloadBus:function(){var t=this,i=t._$filterForm.find("select[name=Bus]").empty(),r=0;n.each(t._data[t._cTripIndex].Ts[t._cTripTime],function(u,f){if(typeof f!="undefined"&&f!=null&&f.S!=3){var e=n("<option />",{text:"Bus "+u,value:u});t._cTripBus!=null?u==t._cTripBus&&e.attr("selected",!0):r==0&&(e.attr("selected",!0),t._changeCTripBus(u));i.append(e);r++}});i.val()!=t._cTripBus&&t._changeCTripBus(i.val())},_search:function(t,i){var r=this,u;vbf("onClearSelectedItem");vbf("resetSeatStack");vIsEstStr(t)&&(u="",typeof i!="undefined"&&i?(u=n.trim(t).toUpperCase(),typeof r._cCodeSt[u]!="undefined"&&r._cCodeSt[u].length>0&&(n.each(r._cCodeSt[u],function(t,i){if(!i.disableClickEvent){var u=r._$sheet.find('.seat[data-position="'+i._coach+"_"+i._row+"_"+i._col+'"]');r._grid||(u=r._$sheet.find('.lseat[data-position="'+i._coach+"_"+i._row+"_"+i._col+'"]'));r._updateSeatStack(u,i);!FlatObj.HScrolled&&FlatObj.STBPhone&&(n("html, body").animate({scrollTop:u.offset().top},500),FlatObj.STBPhone=!1,FlatObj.HScrolled=!0)}}),r._selectedCode=u)):(u=n.trim(t).toLowerCase(),typeof r._cphoneSt[u]!="undefined"&&r._cphoneSt[u].length>0&&(n.each(r._cphoneSt[u],function(t,i){if(!i.disableClickEvent){var u=r._$sheet.find('.seat[data-position="'+i._coach+"_"+i._row+"_"+i._col+'"]');r._grid||(u=r._$sheet.find('.lseat[data-position="'+i._coach+"_"+i._row+"_"+i._col+'"]'));r._updateSeatStack(u,i);!FlatObj.HScrolled&&FlatObj.STBPhone&&(n("html, body").animate({scrollTop:u.offset().top},500),FlatObj.STBPhone=!1,FlatObj.HScrolled=!0)}}),r._selectedPhone=u)))},_searchCancelled:function(t,i){var r=this,u,f;vbf("onClearSelectedItem");vbf("resetSeatStack");u="";f=!1;vIsEstStr(t)&&(typeof i!="undefined"&&i?(u=n.trim(t).toUpperCase(),f=!1,n.each(r._c,function(t,i){typeof i!="undefined"&&i!=null&&n.each(i,function(t,i){var o,s,e;typeof i!="undefined"&&i!=null&&(o=i._getCurrentTicket(),n.isEmptyObject(o)||(s=o._getTicketCode(),s==u&&(e=r._$cancelSheet.find('.seat[data-position="'+i._coach+"_"+i._row+"_"+i._col+'"]'),r._grid||(e=r._$cancelSheet.find('.lseat[data-position="'+i._coach+"_"+i._row+"_"+i._col+'"]')),r._updateSeatStack(e,i),!FlatObj.HScrolled&&FlatObj.STBPhone&&(n("html, body").animate({scrollTop:e.offset().top},500),FlatObj.HScrolled=!0,FlatObj.STBPhone=!1),f=!0)))})}),f&&(r._selectedCode=u)):(u=n.trim(t).toLowerCase(),f=!1,n.each(r._c,function(t,i){typeof i!="undefined"&&i!=null&&n.each(i,function(t,i){var o,s,e;typeof i!="undefined"&&i!=null&&(o=i._getCurrentTicket(),n.isEmptyObject(o)||(s=o._getDefaultPhoneNumber(),s==u&&(e=r._$cancelSheet.find('.seat[data-position="'+i._coach+"_"+i._row+"_"+i._col+'"]'),r._grid||(e=r._$cancelSheet.find('.lseat[data-position="'+i._coach+"_"+i._row+"_"+i._col+'"]')),r._updateSeatStack(e,i),!FlatObj.HScrolled&&FlatObj.STBPhone&&(n("html, body").animate({scrollTop:e.offset().top},500),FlatObj.STBPhone=!1,FlatObj.HScrolled=!0),f=!0)))})}),f&&(r._selectedPhone=u)))},_reloadVOTrip:function(){var t=this,i=t._$voFilterForm.find("select[name=TripId]").empty();n.each(t._data,function(r,u){r==0?(i.append(n("<option />",{text:u.Name,value:u.Id}).attr("selected",!0)),t._changeCVOTripId(u.Id)):i.append(n("<option />",{text:u.Name,value:u.Id}))})},_reloadVVTrip:function(){var t=this,i=t._$vvFilterForm.find("select[name=TripId]").empty();n.each(t._data,function(r,u){r==0?(i.append(n("<option />",{text:u.Name,value:u.Id}).attr("selected",!0)),t._changeCVVTripId(u.Id)):i.append(n("<option />",{text:u.Name,value:u.Id}))})},_reloadVCTrip:function(){var t=this,i=t._$vcFilterForm.find("select[name=TripId]").empty();n.each(t._data,function(r,u){r==0?(i.append(n("<option />",{text:u.Name,value:u.Id}).attr("selected",!0)),t._changeCVCTripId(u.Id)):i.append(n("<option />",{text:u.Name,value:u.Id}))})},_changeCVOTripId:function(n){this._cVOTripId=parseInt(n)},_changeCVVTripId:function(n){this._cVVTripId=parseInt(n)},_changeCVCTripId:function(n){vbf("onChangeVCTrip",{value:parseInt(n)})},_isStageBooking:function(){var n=this;return n._cStageCode<n._cMaxStageCode},reloadAll:function(){var n=this;n._reloadFrame();n._generateStageCode();n._reloadSheet();n._reloadStopPoints();n._reloadTimeFromAndTo();app.fMoving||(vbf("resetSeatStack"),vbf("onClearSelectedItem"))},selectStage:function(n,t){var i=this,r=i._$filterForm;i._changeCFromId(n);i._changeCToId(t);r.find("select[name=FromPoint]").val(n);r.find("select[name=ToPoint]").val(t);i.reloadAll()},_bindEventOnBSFilterForm:function(){var i=this,r=new Date,t=i._$BSfilterForm;t.find(".calendar_drown").datepicker({dateFormat:"dd-mm-yy",defaultDate:r,onSelect:function(n){t.find("button").html(n)}}).hide();t.find("button").on("click",function(){n(".calendar_drown").hide()})},_bindEventOnFilterForm:function(){var t=this,r=new Date,i=t._$filterForm;i.find("input.datepicker").not("[readonly]").datepicker({dateFormat:"DD dd-mm-yy",defaultDate:r,beforeShowDay:function(t){if(app.rights.indexOf(n.rights.bUBlockBks.val)==-1&&typeof _dict._hasBlockBKSByTime!="undefined"&&_dict._hasBlockBKSByTime&&typeof _dict._dayBlockBKS!="undefined"&&typeof _dict._hourBlockBKS!="undefined"){var r=!0,u="available",i=new Date,e=i.getHours(),f=_dict._dayBlockBKS,o=_dict._hourBlockBKS;return e-o<0&&(f+=1),i.setDate(i.getDate()-f),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),t<i&&(r=!1,u="unavailable"),[r,u]}return[!0,"available"]}}).val(r.toFormatString("DD dd-mm-yyyy"));i.find("input.datepicker").not("[readonly]").on("focus",function(){var i="#ui-datepicker-div td[data-month="+t._cTripDate.getMonth()+"][data-year="+t._cTripDate.getFullYear()+"]";n(i+" a").filter(function(){return n(this).text()==t._cTripDate.getDate()}).addClass("ui-state-default ui-state-active")});t._bindEventOnCalendarIcon();i.find("button").each(function(i,r){n(r).hasClass("btn-print")?vev(r,"click",function(n){n.preventDefault();vbf("fPrintExcuse",{me:t})}):n(r).hasClass("btn-refresh")?vev(r,"click",function(i){i.preventDefault();oRq.cEl=n(this);oRq.cLType=1;oRq.cKey="refresh";oRq.cAType=2;oRq.iAc=!0;n("button.btn-thong-ke").removeClass("active");n(this).find("i").addClass("glyphicon-refresh-animate");_dict._availableSeatOn&&vbf("fMapAvaiSeat",{value:t});vbf("resetSeatStack");t._clearSelectedItem();t._reloadSheet();n(this).find("i").removeClass("glyphicon-refresh-animate")}):n(r).hasClass("btn-pickup")?vev(r,"click",function(i){i.preventDefault();t._isOrderring=!0;t._reloadSheet();n("#FilterForm .btn-filter > button").removeClass("active");n("button.btn-thong-ke").removeClass("active")}):n(r).hasClass("btn-backup")?vev(r,"click",function(i){i.preventDefault();n("button.btn-thong-ke").removeClass("active");t.backupBKS(n(r));n(r).attr("disabled","disabled")}):n(r).hasClass("btn-xuat-ben")?vev(r,"click",function(i){i.preventDefault();n(r).hasClass("closed")?t._cancelClosedStatus():(n("#FilterForm .btn-refresh").trigger("click"),n("button.btn-thong-ke").removeClass("active"),t._createXuatBenDialogDiv())}):n(r).hasClass("btn-huy-xuat-ben")?vev(r,"click",function(i){i.preventDefault();n("button.btn-thong-ke").removeClass("active");t._cancelClosedStatus()}):n(r).hasClass("btn-thong-ke")&&vev(r,"click",function(i){n(this).hasClass("active")||(i.preventDefault(),n(this).addClass("active"),n("#FilterForm .btn-filter > button").removeClass("active"),vfe("body","onShowStatistic",{tDate:t._cTripDate,tTime:t._cTripTime,tIndex:t._cTripIndex,tData:t._data[t._cTripIndex]}))})});vbv("fTripChange",function(i){var r=i.d.value,f=n("tr.jtable-data-row[data-record-key='"+r+"']"),u;n("tr.jtable-data-row").removeClass("jtable-row-selected");f.length>0&&n("tr.jtable-data-row[data-record-key='"+r+"']").addClass("jtable-row-selected");t._changeCTripId(r);t._changeCTripIndex(i.d.selectedIndex);t._changeCFromId(0);t._changeCToId(0);t._reloadStopPoints();t._reloadTimeSlot();t._reloadTimeFromAndTo();t._reloadFrame();t._generateStageCode();t._changeCMaxStageCode(t._cStageCode);t._reloadAllowedSeats();t._reloadSheet();t._fMoving||(vbf("resetSeatStack"),t._clearSelectedItem());_dict._availableSeatOn&&vbf("fMapAvaiSeat",{value:t});typeof _dict._hasDefaultStagePerTrip!="undefined"&&_dict._hasDefaultStagePerTrip&&(typeof _dict._defaultStagePerTrip[r]!="undefined"?(u=_dict._defaultStagePerTrip[r].split(","),t._cDefaultFromId=parseInt(u[0]),t._cDefaultToId=parseInt(u[1])):(t._cDefaultFromId=t._cFromId,t._cDefaultToId=t._cToId))});i.find("select[name=FromPoint]").on("change",function(){try{t._changeCFromId(this.value);t.reloadAll()}catch(n){console.error(n)}});i.find("select[name=ToPoint]").on("change",function(){try{t._changeCToId(this.value);t.reloadAll()}catch(n){console.error(n)}});vev("body","fDateChange",function(){FlatObj.FTripGetTrip=!1;t._changeCTripDate(app.cDate);t._hasSearchPhone||(t._cTripTime=null,t._cTripBus=0);t.reload();t._fMoving||(vbf("resetSeatStack"),t._clearSelectedItem())});vev("body","doChangeCTripTime",function(n){t._changeCTripTime(n.d.value)});vev("body","fTimeChange",function(n){t._changeCTripTime(n.d.value);t._reloadFrame();t._reloadSheet();t._fMoving||(vbf("resetSeatStack"),t._clearSelectedItem());t._reloadTimeSlot();t._reloadTimeFromAndTo();_dict._availableSeatOn&&vbf("fMapAvaiSeat",{value:t})});i.find("select[name=Bus]").on("change",function(){try{t._changeCTripBus(this.value);t._reloadFrame();t._reloadSheet();t._fMoving||(vbf("resetSeatStack"),t._clearSelectedItem())}catch(n){console.error(n)}});vbv("doSearchResultSelected",function(i){var u=i.d,c=t._cTripId,r=u.tId,e=u.tDate,o=u.tTime,s=u.phone,l=u.isCanceled,h,f;r!=c&&(t._changeCTripId(r),t._$filterForm.find("select[name=TripId]").val(r),n.each(t._$filterForm.find("select[name=TripId] option"),function(i,u){n(u).attr("value")==r&&t._changeCTripIndex(i)}));t._changeCTripDate(vPrsDt(e));vfe("body","fSetDate",{value:vPrsDt(e)});t._changeCTripTime(o);vfe("body","fSetTime",{value:o});n("a[data-tab=bks]","ul.vbooking-list").trigger("click");t._hasSearchPhone=!0;t._changeCFromId(0);t._changeCToId(0);t._reloadStopPoints();t._reloadTimeSlot();t._reloadTimeFromAndTo();_dict._availableSeatOn&&vbf("fMapAvaiSeat",{value:t});t._reloadFrame();t._generateStageCode();t._changeCMaxStageCode(t._cStageCode);h=function(){vbv("onSetSearchIP",{value:""});l=="isCancelled"?typeof code=="undefined"?t._searchCancelled(s,!1):t._searchCancelled(code,!0):typeof code=="undefined"?t._search(s,!1):t._search(code,!0)};t._reloadSheet(h);t._reloadAllowedSeats();t._reloadData();typeof _dict._hasDefaultStagePerTrip!="undefined"&&_dict._hasDefaultStagePerTrip&&(typeof _dict._defaultStagePerTrip[r]!="undefined"?(f=_dict._defaultStagePerTrip[r].split(","),t._cDefaultFromId=parseInt(f[0]),t._cDefaultToId=parseInt(f[1])):(t._cDefaultFromId=t._cFromId,t._cDefaultToId=t._cToId));t._reloadVOTrip();t._reloadVVTrip();t._reloadVCTrip()});vbv("doSearchBoxFocused",function(){t._fMoving||(t._clearSelectedItem(),vbf("resetSeatStack"))})},_bindEventOnCalendarIcon:function(){var t=this,i=t._$filterForm;i.find(".glyphicon-calendar").parent().on("click",function(){n(this).prev().datepicker("show")})},_bindEventOnVOFilterForm:function(){var n=this,t=n._$voFilterForm;t.find("select[name=TripId]").on("change",function(){try{n._changeCVOTripId(this.value);n._reloadVO()}catch(t){console.error(t)}})},_bindEventOnVVFilterForm:function(){var n=this,t=n._$vvFilterForm;t.find("select[name=TripId]").on("change",function(){try{n._changeCVVTripId(this.value);n._reloadVV()}catch(t){console.error(t)}})},_bindEventOnVCFilterForm:function(){var n=this,t=n._$vcFilterForm;t.find("select[name=TripId]").on("change",function(){try{n._changeCVCTripId(this.value);n._reloadVCTrip()}catch(t){console.error(t)}})},_reloadTripStatistic:function(){var n=this,t=n._createGetTripStatisticObj(),i=function(n){n!=1};n._submitAction(t,i)},_createGetTripStatisticObj:function(){var t=this,n={};return n._a="sGetTripInfo",n._c={TripId:parseInt(t._cTripId),TripDate:"convert(nvarchar(10), $x, 105) = '"+t._cTripDate.toFormatString("dd-mm-yyyy")+"'"},n._f="*",n},_generateStageCode:function(){var n=this;n._data[n._cTripIndex]&&n._generateStageCodeByAreaId(n._data[n._cTripIndex].StopPoints,n._cFromId,n._cToId)},_generateStageCodeByAreaId:function(n,t,i){var r=this,u=Object.keys(n.idx),f=u.length-1,e=n.idx[t.toString()],o=n.idx[i.toString()];r._cStageBinary=r._generateStageCodeByAreaIndex(f,e,o);r._cStageBinary==""&&(r._cStageBinary="1");r._cStageCode=parseInt(r._cStageBinary,2)},_generateStageCodeByAreaIndex:function(n,t,i){var u="",f,r;for(t>i&&(f=t,t=i,i=f),t++,r=1;r<=n;r++)u+=r>=t&&r<=i?"1":"0";return u},_reloadAvailableSeat:function(){var n=this,t=n._createGetTripTotalSeatInfoObj(),i=function(t,i){t==1&&n._mapAvailableSeat(i)};vdc.gTripTotalSeatInfo(t._c,"*",!FlatObj.IsFirstTime,i)},_createGetTripTotalSeatInfoObj:function(){var t=this,n={};return n._a="sGetTripTotalSeatInfo",n._c={TripId:parseInt(t._cTripId),TripDate:"convert(nvarchar(10), $x, 105) = '"+t._cTripDate.toFormatString("dd-mm-yyyy")+"'"},n._f="*",n},_mapAvailableSeat:function(n){var t=this;vfe("body","fMapAvaiSeat",{value:t,data:n})}})})(jQuery);$(document).mouseup(function(n){var t=$("div.search-result");t.is(n.target)||t.has(n.target).length!==0||(t.hide(),$(".inputSuccess2").val(""))});$("div.input-group-btn ul.dropdown-menu li a").click(function(n){var t=$(this).parent().parent().parent(),r=t.find("button"),i=$(this).attr("data-value");return $("input[name=type_filterdate]").val(i),i=="3"?$(".calendar_drown").show():(r.html($(this).text()+' <span class="caret"><\/span>'),t.removeClass("open")),n.preventDefault(),!1});
//# sourceMappingURL=p.min.js.map
