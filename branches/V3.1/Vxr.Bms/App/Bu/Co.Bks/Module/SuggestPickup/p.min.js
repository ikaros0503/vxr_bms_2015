define({start:function(){var n=this;vbv("doGetSuggestPickup",function(t){t.d&&n._suggestLocations(t.d.f,t.d.lpp,t.d.key,t.d.tTime)});vbv("doNavigateSuggestPickup",function(t){t.d&&n._navigateSuggestPickupResult(t.d.keyCode)})},_suggestLocations:function(n,t,i,r){var s=this,e,h,c,u,l,o,k;if(t!=null){if(e=t.split("~"),h=[],e!=null&&e.length>1)for(c=1;c<e.length;c++)u=e[c].split("|"),h.push({pLoc:{_index:u[0],_name:u[1],_time:u[2],_order:u[3],_address:u[4],_nearby:u[5],_locationId:u[6]}});var a=Array(),v=Array(),y=Array(),p=Array();if(i.length>=1)for(l=0;l<h.length;l++){var f=h[l],w=s._replaceUnicodeCharacter(i),b=s._replaceUnicodeCharacter(f.pLoc._name);f.pLoc._name.toLowerCase().indexOf(i.toLowerCase())==0?v.push(f):f.pLoc._name.toLowerCase().indexOf(i.toLowerCase())>0?a.push(f):b.indexOf(w)==0?p.push(f):b.indexOf(w)>0&&y.push(f)}n.find("div.search-result").remove();o=v.concat(a.concat(p.concat(y)));k=n.find("input[name=PickupInfo]");o!=null&&o.length>0&&(k.parent().append($(_dict._locationHeaderTpl).append($('<div class="scrollable" />').append(s._renderResultList(n,o,r))).append(vtpl(_dict._locationFooterTpl,{locCount:o.length}))),s._bindEventsOnSearchResult(n))}},_bindEventsOnSearchResult:function(n){$("div.search-result tr").mousedown(function(){$("input:text[name=PickupInfo]").is(":focus")&&($("input:text[name=PickupInfo]").val($(this).attr("data-name")),$("input[name=pIndex]").val($(this).attr("data-order")));n.find("div.search-result").remove()});$("div.search-result tr").hover(function(){$("div.search-result").find("tr").removeClass("location-selected");$(this).addClass("location-selected")},function(){$(this).removeClass("location-selected")})},_renderResultList:function(n,t,i){var o,u,e,s,r,f;if(n.find("div.search-result.search-location table.search-items").remove(),o=$("<table />").addClass("search-items"),t!=null&&t.length>0)for(u=0;u<t.length;u++)typeof t[u]!="undefined"&&t[u]!=null&&(e=t[u],e._trIndex=u,s=String(i),String(i).indexOf(":")>=0&&(r=parseInt(s.split(":")[1])+parseInt(e.pLoc._time),f=parseInt(s.split(":")[0]),r>=60&&(f+=(r-r%60)/60,r=r%60),f=f>=24?f-24:f,e.pLoc._time=f+":"+(r>9?r.toString():"0"+r)),o.append(vtpl(_dict._locationItemTpl,e)));return o},_replaceUnicodeCharacter:function(n){return n.toLowerCase().replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a").replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e").replace(/ì|í|ị|ỉ|ĩ/g,"i").replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o").replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u").replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y").replace(/đ/g,"d").replace(/^\-+|\-+$/g,"")},_navigateSuggestPickupResult:function(n){var i=$("#update-popup div.search-result tr"),t=$("#update-popup div.search-result tr.location-selected");t.length==0?n==40?i.first().addClass("location-selected"):n==38&&i.last().addClass("location-selected"):(t.removeClass("location-selected"),n==40?t.is(":last-child")?i.first().addClass("location-selected"):t.next().addClass("location-selected"):n==38&&(t.is(":first-child")?i.last().addClass("location-selected"):t.prev().addClass("location-selected")))}});$(document).ready(function(){});
//# sourceMappingURL=p.min.js.map
